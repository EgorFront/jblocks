<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JBlocks Tests</title>
    <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />

    <script type="text/javascript" src="../node_modules/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="../node_modules/should/should.js"></script>
    <script type="text/javascript" src="../node_modules/mocha/mocha.js"></script>

    <script type="text/javascript" src="../dist/jblocks.js"></script>
    <script type="text/javascript">
        mocha.setup('bdd');
    </script>
</head>
<body>
    <div id="mocha"></div>

    <script type="text/javascript">
        $.define('сounter', {
            events: {
                'b-inited': 'oninit',
                'click .js-inc': 'onClickPlus',
                'click .js-dec': 'onClickMinus'
            },

            methods: {
                oninit: function() {
                    this.$info = this.$node.find('.js-info');
                    this.count = 0;
                },

                /**
                 * Обработчик клика на плюс
                 */
                onClickPlus: function() {
                    this.inc();
                    this.update();
                },

                /**
                 * Обработчик клика на минус
                 */
                onClickMinus: function() {
                    this.dec();
                    this.update();
                },

                /**
                 * Увеличить счетчик
                 */
                inc: function() {
                    this.count += this.params.step;
                },

                /**
                 * Уменьшить счетчик
                 */
                dec: function() {
                    this.count -= this.params.step;
                },

                /**
                 * Нарисует новое значение
                 */
                update: function() {
                    this.$info.text(this.count);
                }
            }
        });
    </script>
    <script type="text/javascript" src="tests.js"></script>
    <script type="text/javascript">
        mocha.run();
    </script>
</body>
</html>
